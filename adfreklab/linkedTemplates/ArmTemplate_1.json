{
	"$schema": "http://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#",
	"contentVersion": "1.0.0.0",
	"parameters": {
		"factoryName": {
			"type": "string",
			"metadata": "Data Factory name",
			"defaultValue": "adfreklab"
		},
		"CosmosDb1_connectionString": {
			"type": "secureString",
			"metadata": "Secure string for 'connectionString' of 'CosmosDb1'"
		},
		"CosmosDb2_connectionString": {
			"type": "secureString",
			"metadata": "Secure string for 'connectionString' of 'CosmosDb2'"
		},
		"CosmosDbMov_connectionString": {
			"type": "secureString",
			"metadata": "Secure string for 'connectionString' of 'CosmosDbMov'"
		},
		"FileServer4CofeeRentals_password": {
			"type": "secureString",
			"metadata": "Secure string for 'password' of 'FileServer4CofeeRentals'"
		},
		"SRMDW_connectionString": {
			"type": "secureString",
			"metadata": "Secure string for 'connectionString' of 'SRMDW'"
		},
		"SqlServer1_connectionString": {
			"type": "secureString",
			"metadata": "Secure string for 'connectionString' of 'SqlServer1'"
		},
		"SqlServer1_password": {
			"type": "secureString",
			"metadata": "Secure string for 'password' of 'SqlServer1'"
		},
		"blobneu_connectionString": {
			"type": "secureString",
			"metadata": "Secure string for 'connectionString' of 'blobneu'"
		},
		"copyfile_accountKey": {
			"type": "secureString",
			"metadata": "Secure string for 'accountKey' of 'copyfile'"
		},
		"linkedService1_connectionString": {
			"type": "secureString",
			"metadata": "Secure string for 'connectionString' of 'linkedService1'"
		},
		"myrekcosmo_connectionString": {
			"type": "secureString",
			"metadata": "Secure string for 'connectionString' of 'myrekcosmo'"
		},
		"myrekcosmodest_connectionString": {
			"type": "secureString",
			"metadata": "Secure string for 'connectionString' of 'myrekcosmodest'"
		},
		"sqldbtstil_connectionString": {
			"type": "secureString",
			"metadata": "Secure string for 'connectionString' of 'sqldbtstil'"
		},
		"sqllab_connectionString": {
			"type": "secureString",
			"metadata": "Secure string for 'connectionString' of 'sqllab'"
		},
		"FileServer4CofeeRentals_properties_typeProperties_host": {
			"type": "string",
			"defaultValue": "C:\\"
		},
		"FileServer4CofeeRentals_properties_typeProperties_userId": {
			"type": "string",
			"defaultValue": "openhackadmin"
		},
		"SqlServer1_properties_typeProperties_userName": {
			"type": "string",
			"defaultValue": "openhackadmin"
		},
		"copyfile_properties_typeProperties_url": {
			"type": "string",
			"defaultValue": "https://bsgentwoneu.dfs.core.windows.net"
		},
		"integrationRuntime1_properties_typeProperties_ssisProperties_catalogInfo_catalogServerEndpoint": {
			"type": "string",
			"defaultValue": "sqllabdsa.database.windows.net"
		},
		"integrationRuntime1_properties_typeProperties_ssisProperties_catalogInfo_catalogAdminUserName": {
			"type": "string",
			"defaultValue": "sqladmin"
		},
		"integrationRuntime1_properties_typeProperties_ssisProperties_catalogInfo_catalogAdminPassword": {
			"type": "secureString"
		}
	},
	"variables": {
		"factoryId": "[concat('Microsoft.DataFactory/factories/', parameters('factoryName'))]"
	},
	"resources": [
		{
			"name": "[concat(parameters('factoryName'), '/CosmosDb1')]",
			"type": "Microsoft.DataFactory/factories/linkedServices",
			"apiVersion": "2018-06-01",
			"properties": {
				"annotations": [],
				"type": "CosmosDb",
				"typeProperties": {
					"connectionString": "[parameters('CosmosDb1_connectionString')]"
				}
			},
			"dependsOn": []
		},
		{
			"name": "[concat(parameters('factoryName'), '/CosmosDb2')]",
			"type": "Microsoft.DataFactory/factories/linkedServices",
			"apiVersion": "2018-06-01",
			"properties": {
				"annotations": [],
				"type": "CosmosDb",
				"typeProperties": {
					"connectionString": "[parameters('CosmosDb2_connectionString')]"
				}
			},
			"dependsOn": []
		},
		{
			"name": "[concat(parameters('factoryName'), '/CosmosDbMov')]",
			"type": "Microsoft.DataFactory/factories/linkedServices",
			"apiVersion": "2018-06-01",
			"properties": {
				"annotations": [],
				"type": "CosmosDb",
				"typeProperties": {
					"connectionString": "[parameters('CosmosDbMov_connectionString')]"
				}
			},
			"dependsOn": []
		},
		{
			"name": "[concat(parameters('factoryName'), '/FileServer4CofeeRentals')]",
			"type": "Microsoft.DataFactory/factories/linkedServices",
			"apiVersion": "2018-06-01",
			"properties": {
				"annotations": [],
				"type": "FileServer",
				"typeProperties": {
					"host": "[parameters('FileServer4CofeeRentals_properties_typeProperties_host')]",
					"userId": "[parameters('FileServer4CofeeRentals_properties_typeProperties_userId')]",
					"password": {
						"type": "SecureString",
						"value": "[parameters('FileServer4CofeeRentals_password')]"
					}
				}
			},
			"dependsOn": []
		},
		{
			"name": "[concat(parameters('factoryName'), '/SRMDW')]",
			"type": "Microsoft.DataFactory/factories/linkedServices",
			"apiVersion": "2018-06-01",
			"properties": {
				"annotations": [],
				"type": "AzureSqlDW",
				"typeProperties": {
					"connectionString": "[parameters('SRMDW_connectionString')]"
				}
			},
			"dependsOn": []
		},
		{
			"name": "[concat(parameters('factoryName'), '/SqlServer1')]",
			"type": "Microsoft.DataFactory/factories/linkedServices",
			"apiVersion": "2018-06-01",
			"properties": {
				"annotations": [],
				"type": "SqlServer",
				"typeProperties": {
					"connectionString": "[parameters('SqlServer1_connectionString')]",
					"userName": "[parameters('SqlServer1_properties_typeProperties_userName')]",
					"password": {
						"type": "SecureString",
						"value": "[parameters('SqlServer1_password')]"
					}
				}
			},
			"dependsOn": []
		},
		{
			"name": "[concat(parameters('factoryName'), '/blobneu')]",
			"type": "Microsoft.DataFactory/factories/linkedServices",
			"apiVersion": "2018-06-01",
			"properties": {
				"annotations": [],
				"type": "AzureBlobStorage",
				"typeProperties": {
					"connectionString": "[parameters('blobneu_connectionString')]"
				}
			},
			"dependsOn": []
		},
		{
			"name": "[concat(parameters('factoryName'), '/copyfile')]",
			"type": "Microsoft.DataFactory/factories/linkedServices",
			"apiVersion": "2018-06-01",
			"properties": {
				"annotations": [],
				"type": "AzureBlobFS",
				"typeProperties": {
					"url": "[parameters('copyfile_properties_typeProperties_url')]",
					"accountKey": {
						"type": "SecureString",
						"value": "[parameters('copyfile_accountKey')]"
					}
				}
			},
			"dependsOn": []
		},
		{
			"name": "[concat(parameters('factoryName'), '/linkedService1')]",
			"type": "Microsoft.DataFactory/factories/linkedServices",
			"apiVersion": "2018-06-01",
			"properties": {
				"annotations": [],
				"type": "AzureBlobStorage",
				"typeProperties": {
					"connectionString": "[parameters('linkedService1_connectionString')]"
				}
			},
			"dependsOn": []
		},
		{
			"name": "[concat(parameters('factoryName'), '/myrekcosmo')]",
			"type": "Microsoft.DataFactory/factories/linkedServices",
			"apiVersion": "2018-06-01",
			"properties": {
				"annotations": [],
				"type": "CosmosDb",
				"typeProperties": {
					"connectionString": "[parameters('myrekcosmo_connectionString')]"
				}
			},
			"dependsOn": []
		},
		{
			"name": "[concat(parameters('factoryName'), '/myrekcosmodest')]",
			"type": "Microsoft.DataFactory/factories/linkedServices",
			"apiVersion": "2018-06-01",
			"properties": {
				"annotations": [],
				"type": "CosmosDb",
				"typeProperties": {
					"connectionString": "[parameters('myrekcosmodest_connectionString')]"
				}
			},
			"dependsOn": []
		},
		{
			"name": "[concat(parameters('factoryName'), '/sqldbtstil')]",
			"type": "Microsoft.DataFactory/factories/linkedServices",
			"apiVersion": "2018-06-01",
			"properties": {
				"annotations": [],
				"type": "AzureSqlDatabase",
				"typeProperties": {
					"connectionString": "[parameters('sqldbtstil_connectionString')]"
				}
			},
			"dependsOn": []
		},
		{
			"name": "[concat(parameters('factoryName'), '/sqllab')]",
			"type": "Microsoft.DataFactory/factories/linkedServices",
			"apiVersion": "2018-06-01",
			"properties": {
				"annotations": [],
				"type": "AzureSqlDatabase",
				"typeProperties": {
					"connectionString": "[parameters('sqllab_connectionString')]"
				}
			},
			"dependsOn": []
		},
		{
			"name": "[concat(parameters('factoryName'), '/homeInegrationRuntime')]",
			"type": "Microsoft.DataFactory/factories/integrationRuntimes",
			"apiVersion": "2018-06-01",
			"properties": {
				"type": "SelfHosted",
				"typeProperties": {}
			},
			"dependsOn": []
		},
		{
			"name": "[concat(parameters('factoryName'), '/integrationRuntime1')]",
			"type": "Microsoft.DataFactory/factories/integrationRuntimes",
			"apiVersion": "2018-06-01",
			"properties": {
				"type": "Managed",
				"typeProperties": {
					"computeProperties": {
						"location": "North Europe",
						"nodeSize": "Standard_D2_v3",
						"numberOfNodes": 2,
						"maxParallelExecutionsPerNode": 8
					},
					"ssisProperties": {
						"catalogInfo": {
							"catalogServerEndpoint": "[parameters('integrationRuntime1_properties_typeProperties_ssisProperties_catalogInfo_catalogServerEndpoint')]",
							"catalogAdminUserName": "[parameters('integrationRuntime1_properties_typeProperties_ssisProperties_catalogInfo_catalogAdminUserName')]",
							"catalogAdminPassword": {
								"type": "SecureString",
								"value": "[parameters('integrationRuntime1_properties_typeProperties_ssisProperties_catalogInfo_catalogAdminPassword')]"
							},
							"catalogPricingTier": "S1"
						},
						"edition": "Standard",
						"licenseType": "LicenseIncluded"
					}
				}
			},
			"dependsOn": []
		},
		{
			"name": "[concat(parameters('factoryName'), '/AzureSqlDsaLab')]",
			"type": "Microsoft.DataFactory/factories/datasets",
			"apiVersion": "2018-06-01",
			"properties": {
				"linkedServiceName": {
					"referenceName": "AzureSqlDsaLab",
					"type": "LinkedServiceReference"
				},
				"annotations": [],
				"type": "AzureSqlTable",
				"schema": [],
				"typeProperties": {
					"schema": "dbo",
					"table": "climjson"
				}
			},
			"dependsOn": []
		},
		{
			"name": "[concat(parameters('factoryName'), '/AzureSqlTableClim')]",
			"type": "Microsoft.DataFactory/factories/datasets",
			"apiVersion": "2018-06-01",
			"properties": {
				"linkedServiceName": {
					"referenceName": "AzureSqlDsaLab",
					"type": "LinkedServiceReference"
				},
				"annotations": [],
				"type": "AzureSqlTable",
				"schema": [],
				"typeProperties": {
					"schema": "dbo",
					"table": "stationcomplete"
				}
			},
			"dependsOn": []
		},
		{
			"name": "[concat(parameters('factoryName'), '/JsonClim')]",
			"type": "Microsoft.DataFactory/factories/datasets",
			"apiVersion": "2018-06-01",
			"properties": {
				"linkedServiceName": {
					"referenceName": "AzureBlobStorageJsonrek",
					"type": "LinkedServiceReference"
				},
				"annotations": [],
				"type": "Json",
				"typeProperties": {
					"location": {
						"type": "AzureBlobStorageLocation",
						"container": "clim"
					}
				},
				"schema": {
					"type": "object",
					"properties": {
						"state": {
							"type": "string"
						},
						"longitude": {
							"type": "number"
						},
						"timezone": {
							"type": "string"
						},
						"status": {
							"type": "integer"
						},
						"latitude": {
							"type": "number"
						},
						"updated_at": {
							"type": "string"
						},
						"created_at": {
							"type": "string"
						},
						"id": {
							"type": "integer"
						},
						"alert": {
							"type": "integer"
						},
						"zip": {
							"type": "string"
						},
						"user_id": {
							"type": "string"
						},
						"locations": {
							"type": "array",
							"items": {
								"type": "object",
								"properties": {
									"address": {
										"type": "string"
									},
									"country": {
										"type": "string"
									},
									"authorization": {
										"type": "string"
									},
									"application_id": {
										"type": "string"
									},
									"primary_users": {
										"type": "array",
										"items": {
											"type": "string"
										}
									},
									"city": {
										"type": "string"
									},
									"name": {
										"type": "string"
									},
									"industry": {
										"type": "string"
									},
									"alert": {
										"type": "integer"
									},
									"zip": {
										"type": "string"
									},
									"user_id": {
										"type": "string"
									},
									"id": {
										"type": "integer"
									},
									"created_at": {
										"type": "string"
									},
									"updated_at": {
										"type": "string"
									},
									"devices": {
										"type": "array",
										"items": {
											"type": "object",
											"properties": {
												"ts": {
													"type": "integer"
												},
												"sensor_use": {
													"type": "string"
												},
												"children_action": {
													"type": "integer"
												},
												"online": {
													"type": "integer"
												},
												"created_at": {
													"type": "string"
												},
												"device_type_id": {
													"type": "string"
												},
												"broadcast_interval": {
													"type": "integer"
												},
												"sensors": {
													"type": "array",
													"items": {
														"type": "object",
														"properties": {
															"id": {
																"type": "string"
															},
															"thing_type": {
																"type": "integer"
															},
															"alert": {
																"type": "integer"
															},
															"unit": {
																"type": "string"
															},
															"name": {
																"type": "string"
															},
															"v": {
																"type": "number"
															},
															"type": {
																"type": "string"
															},
															"properties": {
																"type": "object",
																"properties": {
																	"channel": {
																		"type": "integer"
																	}
																}
															},
															"channel": {
																"type": "string"
															},
															"sensor_use": {
																"type": "string"
															},
															"ts": {
																"type": "integer"
															},
															"cayenne_id": {
																"type": "string"
															},
															"parent_id": {
																"type": "string"
															},
															"enabled": {
																"type": "integer"
															},
															"cached": {
																"type": "boolean"
															},
															"device_type_id": {
																"type": "string"
															},
															"created_at": {
																"type": "string"
															}
														}
													}
												},
												"enabled": {
													"type": "integer"
												},
												"children_note": {
													"type": "integer"
												},
												"name": {
													"type": "string"
												},
												"sensor_type": {
													"type": "string"
												},
												"alert": {
													"type": "integer"
												},
												"thing_type": {
													"type": "integer"
												},
												"marker_alert": {
													"type": "string"
												},
												"id": {
													"type": "string"
												},
												"properties": {
													"type": "object",
													"properties": {
														"network": {
															"type": "null"
														},
														"device_registry_id": {
															"type": "string"
														},
														"codec": {
															"type": "null"
														},
														"codec.prox_unit": {
															"type": "string"
														},
														"codec.vol_unit": {
															"type": "string"
														},
														"activation": {
															"type": "string"
														},
														"unit": {
															"type": "string"
														},
														"deveui": {
															"type": "string"
														}
													}
												},
												"location_meta": {
													"type": "array"
												}
											}
										}
									},
									"latitude": {
										"type": "number"
									},
									"timezone": {
										"type": "string"
									},
									"meta_options": {
										"type": "array"
									},
									"status": {
										"type": "integer"
									},
									"supported_device": {
										"type": "string"
									},
									"longitude": {
										"type": "number"
									},
									"state": {
										"type": "string"
									},
									"company_id": {
										"type": "integer"
									}
								}
							}
						},
						"name": {
							"type": "string"
						},
						"city": {
							"type": "string"
						},
						"industry": {
							"type": "string"
						},
						"primary_users": {
							"type": "array",
							"items": {
								"type": "string"
							}
						},
						"application_id": {
							"type": "string"
						},
						"country": {
							"type": "string"
						},
						"authorization": {
							"type": "string"
						},
						"address": {
							"type": "string"
						},
						"stationId": {
							"type": "integer"
						},
						"data": {
							"type": "array",
							"items": {
								"type": "object",
								"properties": {
									"datetime": {
										"type": "string"
									},
									"channels": {
										"type": "array",
										"items": {
											"type": "object",
											"properties": {
												"id": {
													"type": "integer"
												},
												"name": {
													"type": "string"
												},
												"alias": {
													"type": "null"
												},
												"value": {
													"type": "number"
												},
												"status": {
													"type": "integer"
												},
												"valid": {
													"type": "boolean"
												},
												"description": {
													"type": "null"
												}
											}
										}
									}
								}
							}
						}
					}
				}
			},
			"dependsOn": []
		},
		{
			"name": "[concat(parameters('factoryName'), '/climcellstatinfo')]",
			"type": "Microsoft.DataFactory/factories/datasets",
			"apiVersion": "2018-06-01",
			"properties": {
				"linkedServiceName": {
					"referenceName": "blobneu",
					"type": "LinkedServiceReference"
				},
				"annotations": [],
				"type": "Json",
				"typeProperties": {
					"location": {
						"type": "AzureBlobStorageLocation",
						"fileName": "ds_i_8_stationInfo.json",
						"container": "clim"
					}
				},
				"schema": {
					"type": "object",
					"properties": {
						"stationId": {
							"type": "integer"
						},
						"name": {
							"type": "string"
						},
						"shortName": {
							"type": "string"
						},
						"stationsTag": {
							"type": "string"
						},
						"location": {
							"type": "object",
							"properties": {
								"latitude": {
									"type": "number"
								},
								"longitude": {
									"type": "number"
								}
							}
						},
						"timebase": {
							"type": "integer"
						},
						"active": {
							"type": "boolean"
						},
						"owner": {
							"type": "string"
						},
						"regionId": {
							"type": "integer"
						},
						"monitors": {
							"type": "array",
							"items": {
								"type": "object",
								"properties": {
									"channelId": {
										"type": "integer"
									},
									"name": {
										"type": "string"
									},
									"alias": {
										"type": "null"
									},
									"active": {
										"type": "boolean"
									},
									"typeId": {
										"type": "integer"
									},
									"pollutantId": {
										"type": "null"
									},
									"units": {
										"type": "string"
									},
									"description": {
										"type": "null"
									}
								}
							}
						},
						"StationTarget": {
							"type": "string"
						}
					}
				}
			},
			"dependsOn": [
				"[concat(variables('factoryId'), '/linkedServices/blobneu')]"
			]
		},
		{
			"name": "[concat(parameters('factoryName'), '/climcellstationid10')]",
			"type": "Microsoft.DataFactory/factories/datasets",
			"apiVersion": "2018-06-01",
			"properties": {
				"linkedServiceName": {
					"referenceName": "blobneu",
					"type": "LinkedServiceReference"
				},
				"annotations": [],
				"type": "Json",
				"typeProperties": {
					"location": {
						"type": "AzureBlobStorageLocation",
						"fileName": "ds_i_3_stid10.json",
						"container": "clim"
					}
				},
				"schema": {
					"type": "object",
					"properties": {
						"stationId": {
							"type": "integer"
						},
						"data": {
							"type": "array",
							"items": {
								"type": "object",
								"properties": {
									"datetime": {
										"type": "string"
									},
									"channels": {
										"type": "array",
										"items": {
											"type": "object",
											"properties": {
												"id": {
													"type": "integer"
												},
												"name": {
													"type": "string"
												},
												"alias": {
													"type": "null"
												},
												"value": {
													"type": "number"
												},
												"status": {
													"type": "integer"
												},
												"valid": {
													"type": "boolean"
												},
												"description": {
													"type": "null"
												}
											}
										}
									}
								}
							}
						}
					}
				}
			},
			"dependsOn": [
				"[concat(variables('factoryId'), '/linkedServices/blobneu')]"
			]
		}
	]
}